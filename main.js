(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function t(n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"enableValidation",(function(){o._form.addEventListener("submit",(function(e){e.preventDefault()})),o._setFormListeners(),o._toggleButtonState()})),e(this,"_setFormListeners",(function(){Array.from(o._form.querySelectorAll(".".concat(o._object.inputSelector))).forEach((function(e){e.addEventListener("input",(function(){o._formValidation(e),o._toggleButtonState()}))}))})),e(this,"_formValidation",(function(e){e.validity.valid?o._hideError(e):o._showError(e,e.validationMessage)})),e(this,"_toggleButtonState",(function(){var e=o._form.querySelector(".".concat(o._object.submitButtonSelector));o._form.checkValidity()?(e.removeAttribute("disabled"),e.classList.remove(o._object.inactiveButtonClass)):(e.classList.add(o._object.inactiveButtonClass),e.setAttribute("disabled",!0))})),e(this,"_showError",(function(e,t){var n=o._form.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(o._object.errorClass)})),e(this,"_hideError",(function(e){o._form.querySelector("#".concat(e.id,"-error")).classList.remove(o._object.errorClass)})),e(this,"checkValid",(function(){Array.from(o._form.querySelectorAll(".form__input")).forEach((function(e){o._hideError(e,o._object),o._toggleButtonState(o._object)}))})),this._object=n,this._selector=document.querySelector(r),this._form=this._selector.querySelector(this._object.formSelector)};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=t}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this.open=this.open.bind(this),this.close=this.close.bind(this),this._closeButton=this._popup.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_show"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_show"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",this.close),this._popup.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&o(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e))._popupCardImage=t._popup.querySelector(".popup__image"),t._cardImageCaption=t._popup.querySelector(".popup__image-name"),t}return t=c,(n=[{key:"open",value:function(e,t){this._popupCardImage.setAttribute("src",t),this._popupCardImage.setAttribute("alt","Картинка в режиме просмотра"),this._cardImageCaption.textContent=e,u(f(c.prototype),"open",this).call(this)}}])&&a(t.prototype,n),c}(i);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function c(e,t){var n,r,o,a,u=e.submit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a=function(e){"Enter"===e.key&&n._submit()},(o="_handleEnterDown")in(r=v(n=i.call(this,t)))?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n._submit=u,n._form=n._popup.querySelector(".form"),n._inputList=n._form.querySelectorAll(".form__input"),n}return t=c,(n=[{key:"setSubmit",value:function(e){this._submit=e}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"open",value:function(){p(b(c.prototype),"open",this).call(this),document.addEventListener("keydown",this._handleEnterDown)}},{key:"close",value:function(){p(b(c.prototype),"close",this).call(this),document.removeEventListener("keydown",this._handleEnterDown),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;p(b(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}}])&&d(t.prototype,n),c}(i);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r,o,i=this,c=t.data,a=t.handleCardClick,u=t.handleLikeClick,l=t.handleDeleteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){var e=i._getTemplate();return i._likes.forEach((function(t){t._id===i._userId&&e.querySelector(".element__like").classList.add("element__like_clicked")})),e.querySelector(".element").classList.add("element_id_".concat(i._cardId)),e.querySelector(".element__deleteButton").classList.add(i._userId===i._ownerId?"element__deleteButton_visible":"element__deleteButton_hidden"),e.querySelector(".element__like-counter").textContent=i._likes.length,e.querySelector(".element__heading").textContent=i._name,e.querySelector(".element__image").setAttribute("src",i._link),e.querySelector(".element__image").setAttribute("alt",i._name),i._setEventListeners(e),i._element=e.querySelector(".element"),e},(r="createCard")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._name=c.cardData.name,this._link=c.cardData.link,this._cardId=c.cardData._id,this._userId=c.currentUserId,this._ownerId=c.cardData.owner._id,this._likes=c.cardData.likes,this._cardSelector=n,this._getTemplate=this._getTemplate.bind(this),this._handleCardClick=a,this._handleLikeClick=u,this._handleDeleteIconClick=l}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.cloneNode(!0)}},{key:"getId",value:function(){return this._cardId}},{key:"removeCard",value:function(){this._element.remove()}},{key:"updateLikes",value:function(e){this._element.querySelector(".element__like-counter").textContent=e,this._element.querySelector(".element__like").classList.toggle("element__like_clicked")}},{key:"_setEventListeners",value:function(e){var t=this;e.querySelector(".element__deleteButton").addEventListener("click",(function(){t._handleDeleteIconClick()})),e.querySelector(".element__like").addEventListener("click",(function(e){t._handleLikeClick({element:e.target.closest(".element__like"),id:t._cardId})})),e.querySelector(".element__image").addEventListener("click",(function(){t._handleCardClick(t._name,t._link)}))}}])&&g(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n,r){var o,i,c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(e){var t=e.userName,n=e.about;c._profileName.textContent=t,c._profileSub.textContent=n},(o="setUserInfo")in this?Object.defineProperty(this,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[o]=i,this._profileName=document.querySelector(t),this._profileSub=document.querySelector(n),this._profileAvatar=r,this.getUserInfo=this.getUserInfo.bind(this)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{user:this._profileName.textContent,about:this._profileSub.textContent}}},{key:"setAvatar",value:function(e){this._profileAvatar.style.backgroundImage="url(".concat(e,")")}}])&&w(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers,this._checkResponse=this._checkResponse.bind(this)}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(res.status)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then((function(t){return e._checkResponse(t)})).then((function(e){return e}))}},{key:"setUserInfo",value:function(e,t){var n=this;return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._checkResponse(e)}))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this._url,"cards"),{headers:this._headers}).then((function(t){return e._checkResponse(t)})).then((function(e){return e}))}},{key:"sendCard",value:function(e,t){var n=this;return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._checkResponse(e)})).then((function(e){return e}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)})).then((function(e){return e}))}},{key:"setLike",value:function(e){var t=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)})).then((function(e){return e}))}},{key:"removeLike",value:function(e){var t=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)})).then((function(e){return e}))}},{key:"changerAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)})).then((function(e){return e}))}}])&&E(t.prototype,n),e}(),O=".popup_name_edit",j=".popup_name_add",q=".popup_name_changeAvatar",I=document.querySelector(O).querySelector(".form__save-button"),P=document.querySelector(j).querySelector(".form__save-button"),R=document.querySelector(q).querySelector(".form__save-button"),A=document.querySelector(".profile__avatar"),T=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__edit-button"),D=(document.querySelector("#form__input_info_cardName"),document.querySelector("#form__input_info_link"),document.querySelector(".form__input_info_name")),V=document.querySelector(".form__input_info_about"),x=document.querySelector(".elements"),U={formSelector:"form",inputSelector:"form__input",submitButtonSelector:"form__save-button",inactiveButtonClass:"form__save-button-disabled",inputErrorClass:"popup__error",errorClass:"form__error_show"};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=null,F=new L({url:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"6df61dab-da31-4f8e-8ce7-f211bdfa5ef2","Content-type":"application/json"}}),H=new C(".profile__name",".profile__subtitle",A);Promise.all([F.getUserInfo(),F.getCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];J=o._id,H.setUserInfo({userName:o.name,about:o.about}),H.setAvatar(o.avatar),i.forEach((function(e){Z(Y(e))}))})).catch((function(e){return console.log("Ошибка при загрузке карт и информации =>".concat(e))}));var M=new t(U,O);M.enableValidation();var z=new t(U,j);z.enableValidation(),new t(U,q).enableValidation();var $=new h(".popup_name_image");$.setEventListeners();var G=new k({submit:function(e){var t=e.userName,n=e.about;ee(!0,I),F.setUserInfo(t,n).then((function(e){ee(!1,I),H.setUserInfo({userName:t,about:n}),G.close()})).catch((function(e){return console.log("Ошибка при редактировании =>".concat(e))}))}},O);G.setEventListeners();var K=new k({submit:function(e){var t=e.link;ee(!0,R),F.changerAvatar(t).then((function(e){ee(!1,R),H.setAvatar(e.avatar),K.close()})).catch((function(e){return console.log("Ошибка при смене аватара =>".concat(e))}))}},q);K.setEventListeners();var Q=new k({},".popup_name_delete-card");Q.setEventListeners();var W=new k({submit:function(e){var t=e.imgName,n=e.link;ee(!0,P),F.sendCard(t,n).then((function(e){ee(!1,P),Z(Y(e)),W.close()})).catch((function(e){return console.log("Ошибка при редактировании =>".concat(e))}))}},j);W.setEventListeners(),T.addEventListener("click",(function(){W.open(),z.checkValid()})),B.addEventListener("click",(function(){var e=H.getUserInfo();D.value=e.user,V.value=e.about,G.open(),M.checkValid()})),A.addEventListener("click",(function(){K.open(),M.checkValid()}));var X=new r(x);function Y(e){var t=new S({data:{cardData:e,currentUserId:J},handleCardClick:function(e,t){$.open(e,t)},handleDeleteIconClick:function(){Q.open(),Q.setSubmit((function(){F.deleteCard(t.getId()).then((function(){Q.close(),t.removeCard()})).catch((function(e){return console.log("Ошибка при удалении карточки =>".concat(e))}))}))},handleLikeClick:function(e){var n=e.element,r=e.id;n.classList.contains("element__like_clicked")?F.removeLike(r).then((function(e){return t.updateLikes(e.likes.length)})).catch((function(e){return console.log("Ошибка удалении лайка =>".concat(e))})):F.setLike(r).then((function(e){return t.updateLikes(e.likes.length)})).catch((function(e){return console.log("Ошибка установки лайка =>".concat(e))}))}},"#card");return t}function Z(e){var t=e.createCard();X.addItem(t)}function ee(e,t){t.textContent=e?"Сохранение...":"Cохранить"}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsInNlbGVjdG9yIiwiX2Zvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0Rm9ybUxpc3RlbmVycyIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfb2JqZWN0IiwiaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJfaW5wdXQiLCJfZm9ybVZhbGlkYXRpb24iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9mb3JtQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiY2hlY2tWYWxpZGl0eSIsInJlbW92ZUF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJfZXJyb3JNZXNzYWdlIiwiX2Vycm9yRWxlbWVudCIsImlkIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwidGhpcyIsIl9zZWxlY3RvciIsImRvY3VtZW50IiwiZm9ybVNlbGVjdG9yIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIm9wZW4iLCJiaW5kIiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwQ2FyZEltYWdlIiwiX2NhcmRJbWFnZUNhcHRpb24iLCJuYW1lIiwibGluayIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXQiLCJfc3VibWl0IiwiX2lucHV0TGlzdCIsImZ1bmMiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfaGFuZGxlRW50ZXJEb3duIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJDYXJkIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUljb25DbGljayIsImNhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZXMiLCJwZXJzb24iLCJfaWQiLCJfdXNlcklkIiwiX2NhcmRJZCIsIl9vd25lcklkIiwibGVuZ3RoIiwiX25hbWUiLCJfbGluayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9lbGVtZW50IiwiY2FyZERhdGEiLCJjdXJyZW50VXNlcklkIiwib3duZXIiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVJY29uQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY291bnQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJzdWJTZWxlY3RvciIsInVzZXJBdmF0YXIiLCJ1c2VyTmFtZSIsImFib3V0IiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVTdWIiLCJfcHJvZmlsZUF2YXRhciIsImdldFVzZXJJbmZvIiwidXNlciIsImltYWdlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJyZXMiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJuZXdOYW1lIiwibmV3SW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cEF2YXRhciIsInBvcHVwRWRpdFNhdmVCdXR0b24iLCJwb3B1cEFkZFNhdmVCdXR0b24iLCJwb3B1cEF2YXRhclNhdmVCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJmb3JtVXNlck5hbWUiLCJmb3JtQWJvdXQiLCJjYXJkQ29udGFpbmVyIiwidmFsaWRDb25maWciLCJpbnB1dEVycm9yQ2xhc3MiLCJ1c2VySWQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZiIsImFsbCIsImdldENhcmRzIiwidXNlckRhdGEiLCJjYXJkcyIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwiaXRlbSIsImFkZENhcmRUb0RvbSIsImNyZWF0ZUNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cEVkaXR2YWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiUG9wdXBBZGRWYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWciLCJzZXRFdmVudExpc3RlbmVycyIsImVkaXRQb3B1cCIsImxvYWRpbmciLCJjaGFuZ2VBdmF0YXRQb3B1cCIsImNoYW5nZXJBdmF0YXIiLCJkZWxldGVQb3B1cCIsInNhdmVQb3B1cCIsImltZ05hbWUiLCJzZW5kQ2FyZCIsImNoZWNrVmFsaWQiLCJuZXdVc2VyRGF0YSIsImNhcmRMaXN0Iiwic2V0U3VibWl0IiwiZGVsZXRlQ2FyZCIsImdldElkIiwicmVtb3ZlQ2FyZCIsInJlbW92ZUxpa2UiLCJ1cGRhdGVMaWtlcyIsInNldExpa2UiLCJnZW5lcmF0ZWRDYXJkIiwiYWRkSXRlbSIsImxvYWRlZCIsImJ1dHRvbiJdLCJtYXBwaW5ncyI6IitJQUFxQkEsRUFDakIsV0FBWUMsRUFBUUMsR0FBVSxZLDRGQUFBLG9DQUtYLFdBQ2YsRUFBS0MsTUFBTUMsaUJBQWlCLFVBQVUsU0FBU0MsR0FDM0NBLEVBQUlDLG9CQUVSLEVBQUtDLG9CQUNMLEVBQUtDLHdCQVZxQiw0QkFZVixXQUNHQyxNQUFNQyxLQUFLLEVBQUtQLE1BQU1RLGlCQUFYLFdBQWdDLEVBQUtDLFFBQVFDLGlCQUNoRUMsU0FBUSxTQUFDQyxHQUNoQkEsRUFBT1gsaUJBQWlCLFNBQVMsV0FDN0IsRUFBS1ksZ0JBQWdCRCxHQUNyQixFQUFLUCw4QkFqQmEsMEJBcUJaLFNBQUNPLEdBQ1hBLEVBQU9FLFNBQVNDLE1BQ2hCLEVBQUtDLFdBQVdKLEdBRWhCLEVBQUtLLFdBQVdMLEVBQVFBLEVBQU9NLHNCQXpCVCw2QkE0QlQsV0FDakIsSUFBTUMsRUFBYyxFQUFLbkIsTUFBTW9CLGNBQVgsV0FBNkIsRUFBS1gsUUFBUVksdUJBQzFELEVBQUtyQixNQUFNc0IsaUJBQ1hILEVBQVlJLGdCQUFnQixZQUM1QkosRUFBWUssVUFBVUMsT0FBTyxFQUFLaEIsUUFBUWlCLHVCQUcxQ1AsRUFBWUssVUFBVUcsSUFBSSxFQUFLbEIsUUFBUWlCLHFCQUN2Q1AsRUFBWVMsYUFBYSxZQUFZLE9BcENmLHFCQXVDakIsU0FBQ2hCLEVBQVFpQixHQUNsQixJQUFNQyxFQUFnQixFQUFLOUIsTUFBTW9CLGNBQVgsV0FBNkJSLEVBQU9tQixHQUFwQyxXQUN0QkQsRUFBY0UsWUFBY0gsRUFDNUJDLEVBQWNOLFVBQVVHLElBQUksRUFBS2xC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QUFrQixFQUFsQkEsUUFBU1YsRUFBUyxFQUFUQSxHQUNwQlUsRUFBUWpCLFVBQVU2QixTQUFTLHlCQUc1Qm1HLEVBQUlvQyxXQUFXN0osR0FBSW1HLE1BQUssU0FBQUgsR0FBRyxPQUFJbkQsRUFBS2lILFlBQVk5RCxFQUFJbkMsTUFBTVIsV0FBU2dGLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFSLGtDQUF1Q0YsT0FGdkhiLEVBQUlzQyxRQUFRL0osR0FBSW1HLE1BQUssU0FBQUgsR0FBRyxPQUFJbkQsRUFBS2lILFlBQVk5RCxFQUFJbkMsTUFBTVIsV0FBU2dGLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFSLG1DQUF3Q0YsU0R0SHpHLFNDNkh4QixPQUFPekYsRUFHWCxTQUFTc0YsRUFBYXRGLEdBQ2xCLElBQU1tSCxFQUFnQm5ILEVBQUt1RixhQUMzQm9CLEVBQVNTLFFBQVFELEdBR3JCLFNBQVNqQixHQUFRbUIsRUFBUUMsR0FDWkEsRUFBT2xLLFlBQWhCaUssRUFBOEIsZ0JBQXVDLGMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX29iamVjdCA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKHRoaXMuX29iamVjdC5mb3JtU2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9zZXRGb3JtTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH1cclxuICAgIF9zZXRGb3JtTGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IF9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChgLiR7dGhpcy5fb2JqZWN0LmlucHV0U2VsZWN0b3J9YCkpO1xyXG4gICAgICAgIF9pbnB1dExpc3QuZm9yRWFjaCgoX2lucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIF9pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWxpZGF0aW9uKF9pbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9mb3JtVmFsaWRhdGlvbiA9IChfaW5wdXQpID0+IHtcclxuICAgICAgICBpZiAoX2lucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihfaW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dFcnJvcihfaW5wdXQsIF9pbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IF9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9vYmplY3Quc3VibWl0QnV0dG9uU2VsZWN0b3J9YCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Zvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgIF9mb3JtQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgX2Zvcm1CdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9mb3JtQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fb2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICBfZm9ybUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3Nob3dFcnJvciA9IChfaW5wdXQsIF9lcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBfZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtfaW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IF9lcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9oaWRlRXJyb3IgPSAoX2lucHV0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7X2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIF9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBjaGVja1ZhbGlkID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IF9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0JykpO1xyXG4gICAgICAgIF9pbnB1dExpc3QuZm9yRWFjaCgoX2lucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihfaW5wdXQsIHRoaXMuX29iamVjdCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX29iamVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgICB9XHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX3Nob3dcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX3Nob3dcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJylcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1uYW1lJyk7XHJcbiAgICB9XHJcbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLl9wb3B1cENhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxpbmspO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJ9Ca0LDRgNGC0LjQvdC60LAg0LIg0YDQtdC20LjQvNC1INC/0YDQvtGB0LzQvtGC0YDQsCcpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgc3VibWl0IH0sIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXQgPSBzdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcclxuXHJcbiAgICB9XHJcbiAgICBzZXRTdWJtaXQoZnVuYykge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdCA9IGZ1bmM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gICAgfVxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVudGVyRG93bik7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFbnRlckRvd24pO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZUVudGVyRG93biA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVJY29uQ2xpY2sgfSwgc2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5jYXJkRGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmNhcmREYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5jYXJkRGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gZGF0YS5jdXJyZW50VXNlcklkO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLmNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEuY2FyZERhdGEubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fZ2V0VGVtcGxhdGUgPSB0aGlzLl9nZXRUZW1wbGF0ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbkNsaWNrID0gaGFuZGxlRGVsZXRlSWNvbkNsaWNrO1xyXG4gICAgfVxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuICAgIGNyZWF0ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMuZm9yRWFjaChwZXJzb24gPT4geyBpZiAocGVyc29uLl9pZCA9PT0gdGhpcy5fdXNlcklkKSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2VfY2xpY2tlZFwiKSB9KTsgLy8g0YfRgtC+LdCx0Ysg0LjQutC+0L3QutCwINGBINC70LDQudC60L7QvCDRgdC+0YXRgNCw0L3Rj9C70LDRgdGMINC/0L7RgdC70LUg0L/QtdGA0LXQt9Cw0LPRgNGD0LfQutC4XHJcbiAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsYXNzTGlzdC5hZGQoYGVsZW1lbnRfaWRfJHt0aGlzLl9jYXJkSWR9YCk7XHJcbiAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlQnV0dG9uJykuY2xhc3NMaXN0LmFkZCh0aGlzLl91c2VySWQgPT09IHRoaXMuX293bmVySWQgPyAnZWxlbWVudF9fZGVsZXRlQnV0dG9uX3Zpc2libGUnIDogJ2VsZW1lbnRfX2RlbGV0ZUJ1dHRvbl9oaWRkZW4nKTtcclxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFkaW5nJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9saW5rKTtcclxuICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLnNldEF0dHJpYnV0ZSgnYWx0JywgdGhpcy5fbmFtZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKTtcclxuICAgICAgICByZXR1cm4gY2FyZDtcclxuICAgIH1cclxuICAgIGdldElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkSWQ7XHJcbiAgICB9XHJcbiAgICByZW1vdmVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKClcclxuICAgIH1cclxuICAgIHVwZGF0ZUxpa2VzKGNvdW50KSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSBjb3VudDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9jbGlja2VkJyk7XHJcbiAgICB9XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoZWxlbWVudCkge1xyXG4gICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZUJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVEZWxldGVJY29uQ2xpY2soKSB9KTtcclxuICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7IHRoaXMuX2hhbmRsZUxpa2VDbGljayh7IGVsZW1lbnQ6IGV2dC50YXJnZXQuY2xvc2VzdCgnLmVsZW1lbnRfX2xpa2UnKSwgaWQ6IHRoaXMuX2NhcmRJZCB9KSB9KTtcclxuICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaykgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBzdWJTZWxlY3RvciwgdXNlckF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YlNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gdXNlckF2YXRhcjtcclxuICAgICAgICB0aGlzLmdldFVzZXJJbmZvID0gdGhpcy5nZXRVc2VySW5mby5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsIGFib3V0OiB0aGlzLl9wcm9maWxlU3ViLnRleHRDb250ZW50IH07XHJcbiAgICB9XHJcbiAgICBzZXRVc2VySW5mbyA9ICh7IHVzZXJOYW1lLCBhYm91dCB9KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlU3ViLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB9XHJcbiAgICBzZXRBdmF0YXIoaW1hZ2UpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtpbWFnZX0pYDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gY29uZmlnLnVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZSA9IHRoaXMuX2NoZWNrUmVzcG9uc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLm9rID8gcmVzcG9uc2UuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHsgcmV0dXJuIHJlcyB9KTtcclxuICAgIH1cclxuICAgIHNldFVzZXJJbmZvKG5ld05hbWUsIG5ld0luZm8pIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBuZXdOYW1lLCBhYm91dDogbmV3SW5mbyB9KVxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2VuZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KVxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB7IHJldHVybiByZXMgfSk7XHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB7IHJldHVybiByZXMgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB7IHJldHVybiByZXMgfSk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB7IHJldHVybiByZXMgfSk7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHsgcmV0dXJuIHJlcyB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCB7IHByb2ZpbGVBYm91dFNlbGVjdG9yLCBwcm9maWxlTmFtZVNlbGVjdG9yLCBwb3B1cEFkZFNhdmVCdXR0b24sIHBvcHVwQXZhdGFyU2F2ZUJ1dHRvbiwgcG9wdXBFZGl0U2F2ZUJ1dHRvbiwgdXNlckF2YXRhciwgcG9wdXBBdmF0YXIsIHBvcHVwRGVsZXRlLCBhcGlBdXRoS2V5LCBhcGlVcmwsIHZhbGlkQ29uZmlnLCBmb3JtQWJvdXQsIGZvcm1Vc2VyTmFtZSwgcG9wdXBBZGQsIHBvcHVwRWRpdCwgcHJvZmlsZUFkZEJ1dHRvbiwgcHJvZmlsZUVkaXRCdXR0b24sIGZvcm1DYXJkTmFtZSwgZm9ybUxpbmssIGNhcmRDb250YWluZXIsIGRlZmF1bHRDYXJkU2VsZWN0b3IsIHBvcHVwUHJldmlldyB9O1xyXG5jb25zdCBwb3B1cEVkaXQgPSAnLnBvcHVwX25hbWVfZWRpdCc7IC8vINCy0YvQsdGA0LDQuyDQv9C+0L/QsNC/INC60L7RgtC+0YDRi9C5INGA0LXQtNCw0LrRgtC40YDRg9C10YIg0L/RgNC+0YTQuNC70YxcclxuY29uc3QgcG9wdXBBZGQgPSAnLnBvcHVwX25hbWVfYWRkJzsgLy8g0LLRi9Cx0YDQsNC7INC/0L7Qv9Cw0L8g0LrQvtGC0L7RgNGL0Lkg0LTQvtCx0LDQstC70Y/QtdGCINC60LDRgNGC0L7Rh9C60YNcclxuY29uc3QgcG9wdXBEZWxldGUgPSAnLnBvcHVwX25hbWVfZGVsZXRlLWNhcmQnO1xyXG5jb25zdCBwb3B1cEF2YXRhciA9ICcucG9wdXBfbmFtZV9jaGFuZ2VBdmF0YXInO1xyXG5jb25zdCBwb3B1cFByZXZpZXcgPSAnLnBvcHVwX25hbWVfaW1hZ2UnOyAvLyDQstGL0LHRgNCw0Lsg0L/QvtC/0LDQvyDRgSDQv9GA0L7RgdC80L7RgtGA0L7QvCDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IHBvcHVwRWRpdFNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwRWRpdCkucXVlcnlTZWxlY3RvcignLmZvcm1fX3NhdmUtYnV0dG9uJyk7XHJcbmNvbnN0IHBvcHVwQWRkU2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBBZGQpLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zYXZlLWJ1dHRvbicpO1xyXG5jb25zdCBwb3B1cEF2YXRhclNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwQXZhdGFyKS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc2F2ZS1idXR0b24nKTtcclxuY29uc3QgdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuY29uc3QgcHJvZmlsZUFib3V0U2VsZWN0b3IgPSAnLnByb2ZpbGVfX3N1YnRpdGxlJztcclxuY29uc3QgcHJvZmlsZU5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmFtZSc7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpOyAvLyDQutC90L7Qv9C60LAg0YEg0LTQvtCx0LDQstC70LXQvdC40LXQvCDQutCw0YDRgtC+0YfQtdC6XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgZm9ybUNhcmROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1fX2lucHV0X2luZm9fY2FyZE5hbWUnKTtcclxuY29uc3QgZm9ybUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybV9faW5wdXRfaW5mb19saW5rJyk7XHJcbmNvbnN0IGZvcm1Vc2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF9pbmZvX25hbWUnKTtcclxuY29uc3QgZm9ybUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X2luZm9fYWJvdXQnKTtcclxuY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7IC8vIGNl0LrRhtC40Y8g0LrRg9C00LAg0L3Rg9C20L3QviDQtNC+0LHQsNCy0LjRgtGMINC60LDRgNGC0L7Rh9C60YNcclxuY29uc3QgZGVmYXVsdENhcmRTZWxlY3RvciA9IFwiI2NhcmRcIjtcclxuY29uc3QgYXBpVXJsID0gJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjYvJztcclxuY29uc3QgYXBpQXV0aEtleSA9ICc2ZGY2MWRhYi1kYTMxLTRmOGUtOGNlNy1mMjExYmRmYTVlZjInO1xyXG5cclxuY29uc3QgdmFsaWRDb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCJmb3JtX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiZm9ybV9fc2F2ZS1idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc2F2ZS1idXR0b24tZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3Jfc2hvd1wiLFxyXG59OyIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBwcm9maWxlTmFtZVNlbGVjdG9yLFxyXG4gICAgcHJvZmlsZUFib3V0U2VsZWN0b3IsXHJcbiAgICBwb3B1cEFkZFNhdmVCdXR0b24sXHJcbiAgICBwb3B1cEF2YXRhclNhdmVCdXR0b24sXHJcbiAgICBwb3B1cEVkaXRTYXZlQnV0dG9uLFxyXG4gICAgdXNlckF2YXRhcixcclxuICAgIHBvcHVwQXZhdGFyLFxyXG4gICAgcG9wdXBEZWxldGUsXHJcbiAgICB2YWxpZENvbmZpZyxcclxuICAgIGZvcm1Vc2VyTmFtZSxcclxuICAgIGZvcm1BYm91dCxcclxuICAgIHBvcHVwQWRkLFxyXG4gICAgcG9wdXBFZGl0LFxyXG4gICAgcHJvZmlsZUFkZEJ1dHRvbixcclxuICAgIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gICAgY2FyZENvbnRhaW5lcixcclxuICAgIGRlZmF1bHRDYXJkU2VsZWN0b3IsXHJcbiAgICBwb3B1cFByZXZpZXcsXHJcbiAgICBhcGlVcmwsXHJcbiAgICBhcGlBdXRoS2V5LFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxubGV0IHVzZXJJZCA9IG51bGw7XHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgdXJsOiBhcGlVcmwsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogYXBpQXV0aEtleSxcclxuICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG59KTtcclxuY29uc3QgdXNlckluZiA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlQWJvdXRTZWxlY3RvciwgdXNlckF2YXRhcik7XHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldENhcmRzKCldKVxyXG4gICAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICAgICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgICAgIHVzZXJJbmYuc2V0VXNlckluZm8oeyB1c2VyTmFtZTogdXNlckRhdGEubmFtZSwgYWJvdXQ6IHVzZXJEYXRhLmFib3V0IH0pO1xyXG4gICAgICAgIHVzZXJJbmYuc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgYWRkQ2FyZFRvRG9tKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LrQsNGA0YIg0Lgg0LjQvdGE0L7RgNC80LDRhtC40LggPT4ke2Vycn1gKSk7XHJcblxyXG5jb25zdCBQb3B1cEVkaXR2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZENvbmZpZywgcG9wdXBFZGl0KTtcclxuUG9wdXBFZGl0dmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IFBvcHVwQWRkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRDb25maWcsIHBvcHVwQWRkKTtcclxuUG9wdXBBZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgUG9wdXBBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZENvbmZpZywgcG9wdXBBdmF0YXIpO1xyXG5Qb3B1cEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBQcmV2aWV3KTtcclxucG9wdXBXaXRoSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICAgICAgc3VibWl0OiAoeyB1c2VyTmFtZSwgYWJvdXQgfSkgPT4ge1xyXG4gICAgICAgICAgICBsb2FkaW5nKHRydWUsIHBvcHVwRWRpdFNhdmVCdXR0b24pO1xyXG4gICAgICAgICAgICBhcGkuc2V0VXNlckluZm8odXNlck5hbWUsIGFib3V0KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nKGZhbHNlLCBwb3B1cEVkaXRTYXZlQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmYuc2V0VXNlckluZm8oeyB1c2VyTmFtZSwgYWJvdXQgfSk7XHJcbiAgICAgICAgICAgICAgICBlZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LggPT4ke2Vycn1gKSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwb3B1cEVkaXRcclxuKTtcclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGNoYW5nZUF2YXRhdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgc3VibWl0OiAoeyBsaW5rIH0pID0+IHtcclxuICAgICAgICBsb2FkaW5nKHRydWUsIHBvcHVwQXZhdGFyU2F2ZUJ1dHRvbik7XHJcbiAgICAgICAgYXBpLmNoYW5nZXJBdmF0YXIobGluaykudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBsb2FkaW5nKGZhbHNlLCBwb3B1cEF2YXRhclNhdmVCdXR0b24pO1xyXG4gICAgICAgICAgICB1c2VySW5mLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgICAgICAgY2hhbmdlQXZhdGF0UG9wdXAuY2xvc2UoKTtcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvNC10L3QtSDQsNCy0LDRgtCw0YDQsCA9PiR7ZXJyfWApKTtcclxuICAgIH1cclxufSwgcG9wdXBBdmF0YXIpO1xyXG5jaGFuZ2VBdmF0YXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHt9LFxyXG4gICAgcG9wdXBEZWxldGUpO1xyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3Qgc2F2ZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgICAgIHN1Ym1pdDogKHsgaW1nTmFtZSwgbGluayB9KSA9PiB7XHJcbiAgICAgICAgICAgIGxvYWRpbmcodHJ1ZSwgcG9wdXBBZGRTYXZlQnV0dG9uKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRDYXJkKGltZ05hbWUsIGxpbmspLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvYWRpbmcoZmFsc2UsIHBvcHVwQWRkU2F2ZUJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICBhZGRDYXJkVG9Eb20oY3JlYXRlQ2FyZChjYXJkKSk7XHJcbiAgICAgICAgICAgICAgICBzYXZlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LggPT4ke2Vycn1gKSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwb3B1cEFkZFxyXG4pO1xyXG5zYXZlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgc2F2ZVBvcHVwLm9wZW4oKTtcclxuICAgIFBvcHVwQWRkVmFsaWRhdG9yLmNoZWNrVmFsaWQoKTtcclxufSk7XHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBuZXdVc2VyRGF0YSA9IHVzZXJJbmYuZ2V0VXNlckluZm8oKTtcclxuICAgIGZvcm1Vc2VyTmFtZS52YWx1ZSA9IG5ld1VzZXJEYXRhLnVzZXI7XHJcbiAgICBmb3JtQWJvdXQudmFsdWUgPSBuZXdVc2VyRGF0YS5hYm91dDtcclxuICAgIGVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgICBQb3B1cEVkaXR2YWxpZGF0b3IuY2hlY2tWYWxpZCgpO1xyXG59KTtcclxudXNlckF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNoYW5nZUF2YXRhdFBvcHVwLm9wZW4oKVxyXG4gICAgUG9wdXBFZGl0dmFsaWRhdG9yLmNoZWNrVmFsaWQoKTtcclxufSlcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihjYXJkQ29udGFpbmVyKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgZGF0YTogeyBjYXJkRGF0YSwgY3VycmVudFVzZXJJZDogdXNlcklkIH0sXHJcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cFdpdGhJbWcub3BlbihuYW1lLCBsaW5rKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhbmRsZURlbGV0ZUljb25DbGljazogKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVQb3B1cC5vcGVuKClcclxuICAgICAgICAgICAgZGVsZXRlUG9wdXAuc2V0U3VibWl0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuZ2V0SWQoKSkuXHJcbiAgICAgICAgICAgICAgICB0aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGD0LTQsNC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCA9PiR7ZXJyfWApKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6ICh7IGVsZW1lbnQsIGlkIH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImVsZW1lbnRfX2xpa2VfY2xpY2tlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgYXBpLnNldExpa2UoaWQpLnRoZW4ocmVzID0+IGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzLmxlbmd0aCkpLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINGD0YHRgtCw0L3QvtCy0LrQuCDQu9Cw0LnQutCwID0+JHtlcnJ9YCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBpLnJlbW92ZUxpa2UoaWQpLnRoZW4ocmVzID0+IGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzLmxlbmd0aCkpLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINGD0LTQsNC70LXQvdC40Lgg0LvQsNC50LrQsCA9PiR7ZXJyfWApKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LCBkZWZhdWx0Q2FyZFNlbGVjdG9yKTtcclxuICAgIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRDYXJkVG9Eb20oY2FyZCkge1xyXG4gICAgY29uc3QgZ2VuZXJhdGVkQ2FyZCA9IGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShnZW5lcmF0ZWRDYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZGluZyhsb2FkZWQsIGJ1dHRvbikge1xyXG4gICAgbG9hZGVkID8gYnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiIDogYnV0dG9uLnRleHRDb250ZW50ID0gXCJD0L7RhdGA0LDQvdC40YLRjFwiO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==